import{y as $,r as a,j as e,B as N,aw as Y,a6 as A,al as L,am as T}from"./react-vendor.BBJia3te.js";import{u as H,N as _,F as G}from"./index.DxS_35Oe.js";import{B as n}from"./button.DW3yOuL1.js";import{I as d}from"./input.Bv8OeE7T.js";import{l as U,L as l,T as C,c as V,i as W}from"./textarea.UrdhZl29.js";import"./vendor.Df8FfzQY.js";const Z="rzp_test_YOUR_KEY_HERE",S=[{id:"1",name:"Sonic Pro Electric Toothbrush",image:"https://images.unsplash.com/photo-1559304822-9eb5e14a44ee?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",price:79.99,quantity:1},{id:"3",name:"Organic Mint Dental Floss",image:"https://images.unsplash.com/photo-1612887726773-e64e49123924?ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxwaG90by1wYWdlfHx8fGVufDB8fHx8fA%3D%3D&auto=format&fit=crop&w=500&q=80",price:8.99,quantity:2}],K=[{id:"razorpay",name:"Pay with Razorpay",icon:e.jsx(L,{className:"h-5 w-5"})},{id:"cash",name:"Cash on Delivery",icon:e.jsx(T,{className:"h-5 w-5"})}],te=()=>{const P=$(),{toast:x}=H(),[r,o]=a.useState(1),[i,D]=a.useState("razorpay"),[h,k]=a.useState(""),[u,F]=a.useState(""),[c,M]=a.useState(localStorage.getItem("lastUsedPhone")||""),[m,z]=a.useState(""),[j,q]=a.useState(""),[p,O]=a.useState(""),[I,R]=a.useState("");a.useState(""),a.useState(""),a.useState(""),a.useState("");const[b,w]=a.useState(!1);a.useEffect(()=>{U()},[]);const g=S.reduce((s,t)=>s+t.price*t.quantity,0),f=g>50?0:5.99,y=g+f,B=async()=>{try{w(!0);const s=Math.round(y*83*100);console.log("Creating order with amount:",s);const t=await V(s);console.log("Order created:",t);const E=await W({key:Z,amount:t.amount,currency:"INR",name:"Socio Smile Market",description:"Order payment",order_id:t.id,prefill:{name:h,email:u,contact:c},notes:{address:m,shipping_address:`${m}, ${j} ${p}`},theme:{color:"#0F766E"}});console.log("Payment successful:",E),o(3)}catch(s){console.error("Payment failed:",s),console.error("Error details:",s.message),x({title:"Payment Failed",description:s.message||"There was an error processing your payment. Please try again.",variant:"destructive"})}finally{w(!1)}},v=()=>{if(r===1){if(!h||!u||!c||!m||!j||!p){x({title:"Missing Information",description:"Please fill in all required fields",variant:"destructive"});return}localStorage.setItem("lastUsedPhone",c),o(2)}else if(r===2){if(i==="razorpay"){B();return}o(3)}else P("/"),x({title:"Success!",description:"Your order has been placed successfully."})};return e.jsxs("div",{className:"min-h-screen flex flex-col",children:[e.jsx(_,{}),e.jsx("main",{className:"flex-grow pt-20",children:e.jsx("section",{className:"py-12 bg-gray-50",children:e.jsx("div",{className:"container-custom",children:e.jsxs("div",{className:"max-w-6xl mx-auto",children:[r<3&&e.jsx("div",{className:"mb-10",children:e.jsx("div",{className:"flex items-center justify-between max-w-md mx-auto",children:["Shipping","Payment","Confirmation"].map((s,t)=>e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`rounded-full h-10 w-10 flex items-center justify-center ${r>t+1?"bg-green-500 text-white":r===t+1?"bg-sociodent-600 text-white":"bg-gray-200 text-gray-500"}`,children:r>t+1?"âœ“":t+1}),e.jsx("div",{className:"ml-3",children:e.jsx("p",{className:"text-sm font-medium",children:s})}),t<2&&e.jsx("div",{className:"hidden sm:block w-24 border-t border-gray-200 mx-4"})]},s))})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs("div",{className:"glass-card border border-white/50 rounded-2xl overflow-hidden shadow-md bg-white",children:[r===1&&e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Shipping Information"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"name",children:"Full Name *"}),e.jsx(d,{id:"name",value:h,onChange:s=>k(s.target.value),placeholder:"John Doe",required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"email",children:"Email Address *"}),e.jsx(d,{id:"email",type:"email",value:u,onChange:s=>F(s.target.value),placeholder:"you@example.com",required:!0})]})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(l,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(d,{id:"phone",value:c,onChange:s=>M(s.target.value),placeholder:"+1 (555) 123-4567",required:!0})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx(l,{htmlFor:"address",children:"Address *"}),e.jsx(C,{id:"address",value:m,onChange:s=>z(s.target.value),placeholder:"Street address",rows:2,required:!0})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx(l,{htmlFor:"city",children:"City *"}),e.jsx(d,{id:"city",value:j,onChange:s=>q(s.target.value),placeholder:"Your city",required:!0})]}),e.jsxs("div",{children:[e.jsx(l,{htmlFor:"zipCode",children:"ZIP / Postal Code *"}),e.jsx(d,{id:"zipCode",value:p,onChange:s=>O(s.target.value),placeholder:"123456",required:!0})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx(l,{htmlFor:"notes",children:"Order Notes (Optional)"}),e.jsx(C,{id:"notes",value:I,onChange:s=>R(s.target.value),placeholder:"Special instructions for delivery",rows:3})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(N,{to:"/marketplace",children:e.jsxs(n,{variant:"outline",className:"flex items-center",children:[e.jsx(Y,{className:"mr-1 h-4 w-4"}),"Continue Shopping"]})}),e.jsx(n,{onClick:v,children:"Continue to Payment"})]})]}),r===2&&e.jsxs("div",{className:"p-6",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Payment Method"}),e.jsx("div",{className:"mb-6",children:e.jsx("div",{className:"grid grid-cols-1 gap-3",children:K.map(s=>e.jsx("div",{className:`
                                  border rounded-lg p-4 flex items-center cursor-pointer transition-all
                                  ${i===s.id?"border-sociodent-600 bg-sociodent-50":"border-gray-200 hover:border-sociodent-300"}
                                `,onClick:()=>D(s.id),children:e.jsxs("div",{className:"flex items-center",children:[e.jsx("div",{className:`w-5 h-5 rounded-full border flex items-center justify-center mr-3 ${i===s.id?"border-sociodent-600":"border-gray-300"}`,children:i===s.id&&e.jsx("div",{className:"w-3 h-3 rounded-full bg-sociodent-600"})}),s.icon,e.jsx("span",{className:"ml-2 font-medium",children:s.name})]})},s.id))})}),i==="cash"&&e.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[e.jsx("h2",{className:"font-semibold mb-4",children:"Cash on Delivery"}),e.jsx("p",{className:"text-gray-600",children:"You will pay the full amount in cash when your order is delivered. Please ensure you have the exact change if possible."})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx(n,{variant:"outline",onClick:()=>o(1),children:"Back"}),e.jsx(n,{onClick:v,disabled:b,children:b?"Processing...":"Complete Order"})]})]}),r===3&&e.jsxs("div",{className:"p-6 text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:e.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M5 13l4 4L19 7"})})}),e.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Order Confirmed!"}),e.jsx("p",{className:"text-gray-600 mb-6",children:"Your order has been placed successfully and will be processed shortly."}),e.jsxs("div",{className:"max-w-md mx-auto bg-gray-50 rounded-lg p-4 mb-6 text-left",children:[e.jsx("h3",{className:"font-medium mb-3",children:"Order Details"}),e.jsxs("div",{className:"grid grid-cols-2 gap-y-2 text-sm",children:[e.jsx("div",{className:"text-gray-600",children:"Order ID:"}),e.jsxs("div",{className:"font-medium",children:["#SD",Math.floor(1e5+Math.random()*9e5)]}),e.jsx("div",{className:"text-gray-600",children:"Date:"}),e.jsx("div",{className:"font-medium",children:new Date().toLocaleDateString()}),e.jsx("div",{className:"text-gray-600",children:"Payment Method:"}),e.jsxs("div",{className:"font-medium",children:[i==="razorpay"&&"Pay with Razorpay",i==="cash"&&"Cash on Delivery"]}),e.jsx("div",{className:"text-gray-600",children:"Total Amount:"}),e.jsxs("div",{className:"font-medium text-sociodent-600",children:["$",y.toFixed(2)]})]})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row justify-center gap-3",children:[e.jsxs(n,{variant:"outline",className:"flex items-center justify-center",children:[e.jsx(A,{className:"mr-2 h-4 w-4"}),"View Your Orders"]}),e.jsx(n,{onClick:v,children:"Continue Shopping"})]})]})]})}),r<3&&e.jsx("div",{className:"lg:col-span-1",children:e.jsxs("div",{className:"glass-card border border-white/50 rounded-2xl overflow-hidden shadow-md bg-white p-6 sticky top-24",children:[e.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Order Summary"}),e.jsx("div",{className:"mb-4",children:S.map(s=>e.jsxs("div",{className:"flex py-4 border-b",children:[e.jsx("div",{className:"w-20 h-20 rounded-md overflow-hidden flex-shrink-0",children:e.jsx("img",{src:s.image,alt:s.name,className:"w-full h-full object-cover"})}),e.jsxs("div",{className:"ml-4 flex-1",children:[e.jsx("h4",{className:"font-medium",children:s.name}),e.jsxs("div",{className:"flex items-center justify-between mt-1",children:[e.jsxs("div",{className:"text-sm text-gray-500",children:["Qty: ",s.quantity]}),e.jsxs("div",{className:"font-medium",children:["$",(s.price*s.quantity).toFixed(2)]})]})]})]},s.id))}),e.jsxs("div",{className:"py-2 border-b border-dashed",children:[e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Subtotal"}),e.jsxs("span",{className:"font-medium",children:["$",g.toFixed(2)]})]}),e.jsxs("div",{className:"flex justify-between mb-2",children:[e.jsx("span",{className:"text-gray-600",children:"Shipping"}),e.jsx("span",{className:"font-medium",children:f===0?"Free":`$${f.toFixed(2)}`})]})]}),e.jsxs("div",{className:"flex justify-between py-3 font-bold text-lg",children:[e.jsx("span",{children:"Total"}),e.jsxs("span",{className:"text-sociodent-600",children:["$",y.toFixed(2)]})]}),e.jsx("div",{className:"mt-6 text-xs text-gray-500",children:e.jsxs("p",{children:["By completing this order, you agree to our ",e.jsx(N,{to:"/terms",className:"text-sociodent-600",children:"Terms of Service"})," and ",e.jsx(N,{to:"/privacy",className:"text-sociodent-600",children:"Privacy Policy"}),"."]})})]})})]})]})})})}),e.jsx(G,{})]})};export{te as default};
